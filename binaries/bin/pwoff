#!/usr/bin/env bash

# Description
# -----------
# Wrapper around poweroff.

# Check if docker installed and there are still running container
if [ command -v docker >/dev/null 2>&1 ] && [ "$(docker ps -q)" ]; then
  echo "There are still running containers."
  docker ps --filter status=running --format "{{.ID}}: {{.Names}}"
  echo
fi

read -p "Do you want to shut down? [y/N] " -n 1 -r
echo

if [[ $REPLY =~ ^[Yy]$ ]]; then
  sudo shutdown +1 "Gracefully shutting down..."
else
  echo "Aborting..."
  exit 0
fi
